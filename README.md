# Chat Suggestions

Проект карточки объявления автомобиля с функционалом предложения вопросов продавцу.

## Описание

Приложение представляет карточку объявления о продаже автомобиля, содержащую:

- Карусель изображений автомобиля
- Кнопки "Позвонить" и "Написать" 
- Блок характеристик автомобиля
- Описание автомобиля
- Блок "Спросите у продавца" с шаблонными вопросами и возможностью множественного выбора

## Технологии

- **Frontend**: React 18, Material-UI (MUI)
- **Backend**: Python Flask, Flask-CORS
- **Контейнеризация**: Docker, Docker Compose

## Запуск проекта локально

### Требования

- Docker
- Docker Compose

### Инструкция

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd chat_suggestions
```

2. Запустите проект с помощью Docker Compose:
```bash
docker-compose up --build
```

3. Откройте браузер и перейдите по адресу:
```
Frontend: http://localhost:3000
Backend API: http://localhost:5000
```

### Остановка проекта

Для остановки контейнеров:
```bash
docker-compose down
```

## Структура проекта

```
chat_suggestions/
├── frontend/                 # React приложение
│   ├── public/
│   │   └── images/          # Изображения автомобилей
│   ├── src/
│   │   ├── components/      # React компоненты
│   │   │   ├── ProductCard.js      # Основная карточка товара
│   │   │   ├── ImageCarousel.js    # Карусель изображений
│   │   │   └── SellerQuestions.js  # Блок вопросов продавцу
│   │   └── App.js          # Главный компонент
│   ├── Dockerfile
│   └── package.json
├── backend/                  # Python Flask API
│   ├── app.py              # Основной файл приложения
│   ├── requirements.txt    # Зависимости Python
│   └── Dockerfile          # Docker конфигурация
├── docker-compose.yml
└── README.md
```

## Функциональность

### Карусель изображений
- Отображение изображений размером 374x328px со скруглением 3px
- Навигация стрелками влево/вправо
- Индикаторы текущего изображения

### Кнопки действий
- **Позвонить**: зеленая кнопка (RGB 2, 209, 92)
- **Написать**: синяя кнопка (RGB 0, 170, 255)

### Блок вопросов продавцу

#### Системные шаблоны
Содержит 4 системных шаблонных вопроса:
1. "Еще продаете?" → "Здравствуйте! Еще продаете автомобиль?"
2. "Торг уместен?" → "Здравствуйте! Скажите, торг уместен?"
3. "Когда можно посмотреть?" → "Здравствуйте! Когда можно посмотреть автомобиль?"
4. "Пришлете видео?" → "Здравствуйте! Можете показать на видео, как выглядит автомобиль?"

#### Функциональность множественного выбора
- **Одиночный выбор**: При клике на одну кнопку текст сразу вставляется в поле
- **Множественный выбор**: При выборе нескольких кнопок отправляется запрос на backend для комбинирования сообщений
- **Визуальная обратная связь**: Выбранные кнопки подсвечиваются синим цветом
- **Debouncing**: Запросы на backend отправляются с задержкой 1 секунда для оптимизации
- **Loader**: Показывается индикатор загрузки во время обработки запроса

#### Пользовательские шаблоны
- Возможность создания до 5 пользовательских шаблонов
- Сохранение в localStorage браузера
- Возможность удаления пользовательских шаблонов

## API Endpoints

### Backend API

#### POST /chat/suggests/combine
Комбинирует несколько шаблонных сообщений в одно.

**Request Body:**
```json
{
  "messages": ["Сообщение 1", "Сообщение 2", "Сообщение 3"]
}
```

**Response:**
```json
{
  "combined_message": "Сообщение 1 Сообщение 2 Сообщение 3",
  "original_count": 3
}
```

#### GET /health
Проверка работоспособности сервера.

**Response:**
```json
{
  "status": "OK",
  "message": "Backend работает"
}
```

## Автомобили

Приложение случайным образом выбирает один из трех автомобилей:
1. **Mercedes-Benz GL-Class (X166)** - 2014 год, дизель 3.0л, полный привод
2. **Volkswagen Jetta VI** - 2013 год, бензин 1.6л, передний привод  
3. **KIA Sorento (4G)** - 2022 год, бензин 2.5л, полный привод

## Разработка

### Переменные окружения

**Frontend (.env в папке frontend):**
```
REACT_APP_BACKEND_URL=http://localhost:5000
```

**Backend:**
```
FLASK_ENV=development
FLASK_DEBUG=1
```

### Настройка CORS
Backend настроен на прием запросов от фронтенда с помощью Flask-CORS.

### Hot Reload
Оба сервиса поддерживают автоматическое обновление при изменении кода благодаря volume mapping в Docker Compose.
